{"configuration":{},"description":"Sistema completo de gestión para spa con control de roles","documentation":{},"id":106784,"lastModifiedAgent":"structurizr-dotnet/1.1.1","lastModifiedDate":"2025-09-29T09:06:45Z","lastModifiedUser":"liba-","model":{"people":[{"description":"Usuario que agenda citas y consulta servicios","id":"1","location":"Unspecified","name":"Cliente","relationships":[{"description":"Agendar citas y consultar servicios","destinationId":"6","id":"46","sourceId":"1","tags":"Relationship","technology":"HTTPS"},{"description":"Usa el sistema para agendar citas y servicios","destinationId":"5","id":"50","sourceId":"1","tags":"Relationship","technology":"HTTPS"}],"tags":"Element,Person"},{"description":"Personal que gestiona citas y servicios","id":"2","location":"Unspecified","name":"Empleado","relationships":[{"description":"Gestionar operaciones diarias","destinationId":"6","id":"47","sourceId":"2","tags":"Relationship","technology":"HTTPS"},{"description":"Usa el sistema para gestionar operaciones","destinationId":"5","id":"51","sourceId":"2","tags":"Relationship","technology":"HTTPS"}],"tags":"Element,Person"},{"description":"Administra usuarios y configuración","id":"3","location":"Unspecified","name":"Administrador","relationships":[{"description":"Administrar sistema","destinationId":"6","id":"48","sourceId":"3","tags":"Relationship","technology":"HTTPS"},{"description":"Usa el sistema para administrar usuarios y configuraciones","destinationId":"5","id":"52","sourceId":"3","tags":"Relationship","technology":"HTTPS"}],"tags":"Element,Person"},{"description":"Acceso total al sistema","id":"4","location":"Unspecified","name":"SuperUsuario","relationships":[{"description":"Configuración total","destinationId":"6","id":"49","sourceId":"4","tags":"Relationship","technology":"HTTPS"},{"description":"Usa el sistema para gestión total","destinationId":"5","id":"53","sourceId":"4","tags":"Relationship","technology":"HTTPS"}],"tags":"Element,Person"}],"softwareSystems":[{"containers":[{"components":[{"description":"Autenticación y registro","documentation":{},"id":"15","name":"AccountController","relationships":[{"description":"Usa para autenticación","destinationId":"23","id":"62","sourceId":"15","tags":"Relationship"},{"description":"Protegido en Logout","destinationId":"22","id":"70","sourceId":"15","tags":"Relationship"}],"tags":"Element,Component","technology":"Controller"},{"description":"Gestión de citas","documentation":{},"id":"16","name":"CitasController","relationships":[{"description":"Usa para gestión citas","destinationId":"24","id":"63","sourceId":"16","tags":"Relationship"},{"description":"Usa para servicios","destinationId":"25","id":"64","sourceId":"16","tags":"Relationship"},{"description":"Usa para usuarios","destinationId":"23","id":"65","sourceId":"16","tags":"Relationship"},{"description":"Protegido por políticas de citas","destinationId":"22","id":"71","sourceId":"16","tags":"Relationship"}],"tags":"Element,Component","technology":"Controller"},{"description":"Gestión de servicios","documentation":{},"id":"17","name":"ServicioController","relationships":[{"description":"Usa para servicios","destinationId":"25","id":"66","sourceId":"17","tags":"Relationship"},{"description":"Protegido por políticas de servicios","destinationId":"22","id":"72","sourceId":"17","tags":"Relationship"}],"tags":"Element,Component","technology":"Controller"},{"description":"Gestión de usuarios","documentation":{},"id":"18","name":"UserController","relationships":[{"description":"Usa para usuarios","destinationId":"23","id":"67","sourceId":"18","tags":"Relationship"},{"description":"Protegido por políticas de usuarios","destinationId":"22","id":"73","sourceId":"18","tags":"Relationship"},{"description":"Usa para combos","destinationId":"43","id":"97","sourceId":"18","tags":"Relationship"}],"tags":"Element,Component","technology":"Controller"},{"description":"Gestión de roles","documentation":{},"id":"19","name":"RolController","relationships":[{"description":"Usa para roles","destinationId":"26","id":"68","sourceId":"19","tags":"Relationship"},{"description":"Protegido por políticas de roles","destinationId":"22","id":"74","sourceId":"19","tags":"Relationship"}],"tags":"Element,Component","technology":"Controller"},{"description":"Gestión de permisos","documentation":{},"id":"20","name":"PermissionsController","relationships":[{"description":"Usa para permisos","destinationId":"27","id":"69","sourceId":"20","tags":"Relationship"},{"description":"Protegido por políticas de permisos","destinationId":"22","id":"75","sourceId":"20","tags":"Relationship"}],"tags":"Element,Component","technology":"Controller"},{"description":"Páginas principales","documentation":{},"id":"21","name":"HomeController","tags":"Element,Component","technology":"Controller"},{"description":"Filtro de autorización basado en permisos y módulos","documentation":{},"id":"22","name":"CustomAuthorizeAttribute","tags":"Element,Component","technology":"Authorization Filter"}],"description":"ASP.NET Core MVC","documentation":{},"id":"6","name":"Aplicación Web MVC","relationships":[{"description":"Usa servicios via DI","destinationId":"7","id":"56","sourceId":"6","tags":"Relationship"},{"description":"Autentica usuarios","destinationId":"12","id":"59","sourceId":"6","tags":"Relationship"},{"description":"Muestra notificaciones","destinationId":"11","id":"60","sourceId":"6","tags":"Relationship"},{"description":"Usa para notificaciones","destinationId":"45","id":"99","sourceId":"6","tags":"Relationship"}],"tags":"Element,Container","technology":"ASP.NET Core MVC"},{"components":[{"description":"Gestión de usuarios","documentation":{},"id":"23","name":"UserService","relationships":[{"description":"Accede a usuarios","destinationId":"29","id":"76","sourceId":"23","tags":"Relationship"},{"description":"Usa para mapeo","destinationId":"42","id":"96","sourceId":"23","tags":"Relationship"},{"description":"Usa para claims","destinationId":"44","id":"98","sourceId":"23","tags":"Relationship"}],"tags":"Element,Component","technology":"Service"},{"description":"Gestión de citas","documentation":{},"id":"24","name":"CitasService","relationships":[{"description":"Accede a citas","destinationId":"30","id":"77","sourceId":"24","tags":"Relationship"},{"description":"Accede a servicios","destinationId":"31","id":"78","sourceId":"24","tags":"Relationship"},{"description":"Accede a usuarios","destinationId":"29","id":"79","sourceId":"24","tags":"Relationship"}],"tags":"Element,Component","technology":"Service"},{"description":"Gestión de servicios","documentation":{},"id":"25","name":"ServicioService","relationships":[{"description":"Accede a servicios","destinationId":"31","id":"80","sourceId":"25","tags":"Relationship"}],"tags":"Element,Component","technology":"Service"},{"description":"Gestión de roles","documentation":{},"id":"26","name":"CustomRolService","relationships":[{"description":"Accede a roles","destinationId":"32","id":"81","sourceId":"26","tags":"Relationship"}],"tags":"Element,Component","technology":"Service"},{"description":"Gestión de permisos","documentation":{},"id":"27","name":"PermissionService","relationships":[{"description":"Accede a permisos","destinationId":"33","id":"82","sourceId":"27","tags":"Relationship"}],"tags":"Element,Component","technology":"Service"},{"description":"Permisos de roles","documentation":{},"id":"28","name":"RolPermissionService","relationships":[{"description":"Accede a permisos-roles","destinationId":"34","id":"83","sourceId":"28","tags":"Relationship"}],"tags":"Element,Component","technology":"Service"}],"description":"Lógica de negocio","documentation":{},"id":"7","name":"Servicios de Aplicación","relationships":[{"description":"Accede a datos via DI","destinationId":"8","id":"57","sourceId":"7","tags":"Relationship"},{"description":"Usa utilidades","destinationId":"10","id":"61","sourceId":"7","tags":"Relationship"}],"tags":"Element,Container","technology":"ASP.NET Core Services"},{"components":[{"description":"Repositorio usuarios","documentation":{},"id":"29","name":"UserRepository","relationships":[{"description":"Usa DbContext","destinationId":"35","id":"84","sourceId":"29","tags":"Relationship"}],"tags":"Element,Component","technology":"Repository"},{"description":"Repositorio citas","documentation":{},"id":"30","name":"CitaRepository","relationships":[{"description":"Usa DbContext","destinationId":"35","id":"85","sourceId":"30","tags":"Relationship"}],"tags":"Element,Component","technology":"Repository"},{"description":"Repositorio servicios","documentation":{},"id":"31","name":"ServicioRepository","relationships":[{"description":"Usa DbContext","destinationId":"35","id":"86","sourceId":"31","tags":"Relationship"}],"tags":"Element,Component","technology":"Repository"},{"description":"Repositorio roles","documentation":{},"id":"32","name":"CustomRolRepository","relationships":[{"description":"Usa DbContext","destinationId":"35","id":"87","sourceId":"32","tags":"Relationship"}],"tags":"Element,Component","technology":"Repository"},{"description":"Repositorio permisos","documentation":{},"id":"33","name":"PermissionRepository","relationships":[{"description":"Usa DbContext","destinationId":"35","id":"88","sourceId":"33","tags":"Relationship"}],"tags":"Element,Component","technology":"Repository"},{"description":"Repositorio permisos-roles","documentation":{},"id":"34","name":"RolPermissionRepository","relationships":[{"description":"Usa DbContext","destinationId":"35","id":"89","sourceId":"34","tags":"Relationship"}],"tags":"Element,Component","technology":"Repository"},{"description":"DbContext principal","documentation":{},"id":"35","name":"AppDbContext","relationships":[{"description":"Mapea tabla","destinationId":"36","id":"90","sourceId":"35","tags":"Relationship"},{"description":"Mapea tabla","destinationId":"37","id":"91","sourceId":"35","tags":"Relationship"},{"description":"Mapea tabla","destinationId":"38","id":"92","sourceId":"35","tags":"Relationship"},{"description":"Mapea tabla","destinationId":"39","id":"93","sourceId":"35","tags":"Relationship"},{"description":"Mapea tabla","destinationId":"40","id":"94","sourceId":"35","tags":"Relationship"},{"description":"Mapea tabla","destinationId":"41","id":"95","sourceId":"35","tags":"Relationship"}],"tags":"Element,Component","technology":"DbContext"}],"description":"Entity Framework","documentation":{},"id":"8","name":"Acceso a Datos","relationships":[{"description":"Persiste datos","destinationId":"9","id":"58","sourceId":"8","tags":"Relationship"}],"tags":"Element,Container","technology":"Entity Framework Core"},{"components":[{"description":"Tabla usuarios","documentation":{},"id":"36","name":"Users","tags":"Element,Component","technology":"SQL Table"},{"description":"Tabla citas","documentation":{},"id":"37","name":"Citas","tags":"Element,Component","technology":"SQL Table"},{"description":"Tabla servicios","documentation":{},"id":"38","name":"Servicios","tags":"Element,Component","technology":"SQL Table"},{"description":"Tabla roles","documentation":{},"id":"39","name":"CustomRoles","tags":"Element,Component","technology":"SQL Table"},{"description":"Tabla permisos","documentation":{},"id":"40","name":"Permissions","tags":"Element,Component","technology":"SQL Table"},{"description":"Tabla roles-permisos","documentation":{},"id":"41","name":"RolPermissions","tags":"Element,Component","technology":"SQL Table"}],"description":"SQL Server","documentation":{},"id":"9","name":"Base de Datos","tags":"Element,Container","technology":"Microsoft SQL Server"},{"components":[{"description":"Mapeo de objetos","documentation":{},"id":"42","name":"AutoMapper","tags":"Element,Component","technology":"Object Mapper"},{"description":"Listas desplegables","documentation":{},"id":"43","name":"CombosHelper","tags":"Element,Component","technology":"Utility"},{"description":"Claims personalizados","documentation":{},"id":"44","name":"CustomClaimsFactory","tags":"Element,Component","technology":"Security"},{"description":"Notificaciones","documentation":{},"id":"45","name":"NotyfService","tags":"Element,Component","technology":"Notification Service"}],"description":"Helpers y utilidades","documentation":{},"id":"10","name":"Infraestructura","tags":"Element,Container","technology":"Librerías .NET"},{"description":"Toast notifications","documentation":{},"id":"11","name":"Notificaciones","tags":"Element,Container","technology":"Librería .NET"}],"description":"Gestión integral de spa con control de accesos","documentation":{},"id":"5","location":"Unspecified","name":"Sistema HankoSpa","relationships":[{"description":"Envía solicitud de cobro por servicios/citas","destinationId":"13","id":"54","sourceId":"5","tags":"Relationship","technology":"HTTPS/API"},{"description":"Envía notificaciones de citas y registro","destinationId":"14","id":"55","sourceId":"5","tags":"Relationship","technology":"SMTP/API"}],"tags":"Element,Software System"},{"description":"Autenticación ASP.NET Core","documentation":{},"id":"12","location":"Unspecified","name":"Identity Framework","tags":"Element,Software System"},{"description":"Procesa pagos en línea por servicios y citas (Stripe/PayPal)","documentation":{},"id":"13","location":"External","name":"Pasarela de Pago","tags":"Element,Software System"},{"description":"Envía confirmaciones, recordatorios y alertas por correo","documentation":{},"id":"14","location":"External","name":"Servicio de Email","tags":"Element,Software System"}]},"name":"Sistema HankoSpa","views":{"componentViews":[{"containerId":"6","description":"Componentes de la Aplicación Web","elements":[{"id":"15","x":0,"y":0},{"id":"16","x":0,"y":0},{"id":"17","x":0,"y":0},{"id":"18","x":0,"y":0},{"id":"19","x":0,"y":0},{"id":"20","x":0,"y":0},{"id":"21","x":0,"y":0},{"id":"22","x":0,"y":0},{"id":"23","x":0,"y":0},{"id":"24","x":0,"y":0},{"id":"25","x":0,"y":0},{"id":"26","x":0,"y":0},{"id":"27","x":0,"y":0}],"externalContainerBoundariesVisible":false,"key":"3-ComponentesWeb","order":0,"relationships":[{"id":"62"},{"id":"63"},{"id":"64"},{"id":"65"},{"id":"66"},{"id":"67"},{"id":"68"},{"id":"69"},{"id":"70"},{"id":"71"},{"id":"72"},{"id":"73"},{"id":"74"},{"id":"75"}]},{"containerId":"6","description":"Flujo completo - Gestión de Usuarios","elements":[{"id":"12","x":0,"y":0},{"id":"18","x":0,"y":0},{"id":"23","x":0,"y":0},{"id":"29","x":0,"y":0},{"id":"35","x":0,"y":0},{"id":"36","x":0,"y":0},{"id":"39","x":0,"y":0},{"id":"42","x":0,"y":0}],"externalContainerBoundariesVisible":false,"key":"4-Codigo-Usuarios","order":0,"relationships":[{"id":"67"},{"id":"76"},{"id":"84"},{"id":"90"},{"id":"93"},{"id":"96"}]},{"containerId":"6","description":"Flujo completo - Gestión de Citas","elements":[{"id":"16","x":0,"y":0},{"id":"23","x":0,"y":0},{"id":"24","x":0,"y":0},{"id":"25","x":0,"y":0},{"id":"30","x":0,"y":0},{"id":"35","x":0,"y":0},{"id":"36","x":0,"y":0},{"id":"37","x":0,"y":0},{"id":"38","x":0,"y":0}],"externalContainerBoundariesVisible":false,"key":"5-Codigo-Citas","order":0,"relationships":[{"id":"63"},{"id":"64"},{"id":"65"},{"id":"77"},{"id":"85"},{"id":"90"},{"id":"91"},{"id":"92"}]},{"containerId":"6","description":"Arquitectura completa - Sistema de Roles","elements":[{"id":"19","x":0,"y":0},{"id":"20","x":0,"y":0},{"id":"26","x":0,"y":0},{"id":"27","x":0,"y":0},{"id":"28","x":0,"y":0},{"id":"32","x":0,"y":0},{"id":"33","x":0,"y":0},{"id":"34","x":0,"y":0},{"id":"35","x":0,"y":0},{"id":"39","x":0,"y":0},{"id":"40","x":0,"y":0},{"id":"41","x":0,"y":0}],"externalContainerBoundariesVisible":false,"key":"6-Codigo-Roles","order":0,"relationships":[{"id":"68"},{"id":"69"},{"id":"81"},{"id":"82"},{"id":"83"},{"id":"87"},{"id":"88"},{"id":"89"},{"id":"93"},{"id":"94"},{"id":"95"}]}],"configuration":{"branding":{},"styles":{"elements":[{"background":"#0d47a1","color":"#ffffff","shape":"Person","tag":"Person"},{"background":"#1168bd","color":"#ffffff","tag":"Software System"},{"background":"#438dd5","color":"#ffffff","tag":"Container"},{"background":"#85bbf0","color":"#000000","tag":"Component"},{"background":"#1f4e7a","color":"#ffffff","shape":"Cylinder","tag":"Database"}]},"terminology":{},"viewSortOrder":"Default"},"containerViews":[{"description":"Diagrama de Contenedores - Arquitectura","elements":[{"id":"1","x":0,"y":0},{"id":"2","x":0,"y":0},{"id":"3","x":0,"y":0},{"id":"4","x":0,"y":0},{"id":"6","x":0,"y":0},{"id":"7","x":0,"y":0},{"id":"8","x":0,"y":0},{"id":"9","x":0,"y":0},{"id":"10","x":0,"y":0},{"id":"11","x":0,"y":0},{"id":"12","x":0,"y":0},{"id":"13","x":0,"y":0},{"id":"14","x":0,"y":0}],"externalSoftwareSystemBoundariesVisible":false,"key":"2-Contenedores","order":0,"relationships":[{"id":"46"},{"id":"47"},{"id":"48"},{"id":"49"},{"id":"56"},{"id":"57"},{"id":"58"},{"id":"59"},{"id":"60"},{"id":"61"}],"softwareSystemId":"5"}],"systemContextViews":[{"description":"Diagrama de Contexto - Muestra actores y sistemas externos","elements":[{"id":"1","x":0,"y":0},{"id":"2","x":0,"y":0},{"id":"3","x":0,"y":0},{"id":"4","x":0,"y":0},{"id":"5","x":0,"y":0},{"id":"12","x":0,"y":0},{"id":"13","x":0,"y":0},{"id":"14","x":0,"y":0}],"enterpriseBoundaryVisible":true,"key":"1-Contexto","order":0,"relationships":[{"id":"50"},{"id":"51"},{"id":"52"},{"id":"53"},{"id":"54"},{"id":"55"}],"softwareSystemId":"5"}]}}